{"componentChunkName":"component---src-templates-blog-post-js","path":"/nginx/configure-nginx-on-ubuntu-2004/","result":{"data":{"site":{"siteMetadata":{"title":"Jaehyeon's Dev Blog","author":"Jaehyeon Kim","siteUrl":"https://jaehyeon48.github.io","comment":{"disqusShortName":"","utterances":"jaehyeon48/blog-comments"}}},"markdownRemark":{"id":"d4ba6087-d273-5bbc-94f6-3c8ab960da64","excerpt":"ì´ í¬ìŠ¤íŠ¸ëŠ” í”„ë¡œì íŠ¸ë¥¼ ë°°í¬í•˜ëŠ” ê³¼ì •ì—ì„œ ì°¸ê³ í•œ ì—¬ëŸ¬ ê°œì˜ í¬ìŠ¤íŠ¸ë¥¼ ì¢…í•©í•œ ê¸€ì…ë‹ˆë‹¤. Ubuntu 20.04ì— Nginx ì„¤ì¹˜í•˜ê¸° Nginx ì„¤ì¹˜ ë°©í™”ë²½ ì„¤ì • ìœ„ ëª…ë ¹ì„ ì‹¤í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ë¦¬ìŠ¤íŠ¸ê°€ ì¶œë ¥ë©ë‹ˆë‹¤: ê° ì„¤ì •ì´ ì˜ë¯¸í•˜ëŠ” ë°”ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤: Nginx HTTP: í¬íŠ¸ 80ë²ˆë§Œ í—ˆìš© Nginx HTTPS: í¬íŠ¸ 443ë²ˆë§Œ í—ˆìš© Nginx Full: í¬íŠ¸ 80, 44â€¦","html":"<p>ì´ í¬ìŠ¤íŠ¸ëŠ” í”„ë¡œì íŠ¸ë¥¼ ë°°í¬í•˜ëŠ” ê³¼ì •ì—ì„œ ì°¸ê³ í•œ ì—¬ëŸ¬ ê°œì˜ í¬ìŠ¤íŠ¸ë¥¼ ì¢…í•©í•œ ê¸€ì…ë‹ˆë‹¤.</p>\n<h2 id=\"ubuntu-2004ì—-nginx-ì„¤ì¹˜í•˜ê¸°\" style=\"position:relative;\"><a href=\"#ubuntu-2004%EC%97%90-nginx-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0\" aria-label=\"ubuntu 2004ì— nginx ì„¤ì¹˜í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"18\" height=\"18\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"link\" viewBox=\"0 0 512 512\"><path fill=\"#05b166\" d=\"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z\"></path></svg></a>Ubuntu 20.04ì— Nginx ì„¤ì¹˜í•˜ê¸°</h2>\n<ol>\n<li><strong>Nginx ì„¤ì¹˜</strong></li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> nginx</code></pre></div>\n<ol start=\"2\">\n<li><strong>ë°©í™”ë²½ ì„¤ì •</strong></li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> ufw app list</code></pre></div>\n<p>ìœ„ ëª…ë ¹ì„ ì‹¤í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ë¦¬ìŠ¤íŠ¸ê°€ ì¶œë ¥ë©ë‹ˆë‹¤:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Available applications:\n  Nginx Full\n  Nginx HTTP\n  Nginx HTTPS\n  OpenSbash</code></pre></div>\n<p>ê° ì„¤ì •ì´ ì˜ë¯¸í•˜ëŠ” ë°”ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:</p>\n<ul>\n<li><strong>Nginx HTTP</strong>: í¬íŠ¸ 80ë²ˆë§Œ í—ˆìš©</li>\n<li><strong>Nginx HTTPS</strong>: í¬íŠ¸ 443ë²ˆë§Œ í—ˆìš©</li>\n<li><strong>Nginx Full</strong>: í¬íŠ¸ 80, 443ë²ˆ í—ˆìš©</li>\n</ul>\n<p>ë°©í™”ë²½ ì„¤ì •ì„ ì ìš©í•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> ufw allow <span class=\"token string\">'Nginx HTTP'</span></code></pre></div>\n<p>ì´í›„ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬ ìƒíƒœë¥¼ ì²´í¬í•©ë‹ˆë‹¤:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> ufw status</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Status: active\n\nTo                         Action      From\n--                         ------      ----\nNginx HTTP                 ALLOW       Anywhere\nNginx HTTP <span class=\"token punctuation\">(</span>v6<span class=\"token punctuation\">)</span>            ALLOW       Anywhere <span class=\"token punctuation\">(</span>v6<span class=\"token punctuation\">)</span></code></pre></div>\n<p>ë§Œì•½ ë°©í™”ë²½ì´ <code class=\"language-text\">inactive</code> ìƒíƒœë¼ë©´ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬ í™œì„±í™” í•©ë‹ˆë‹¤:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> ufw <span class=\"token builtin class-name\">enable</span></code></pre></div>\n<ol start=\"3\">\n<li><strong>Nginx ìƒíƒœ ì²´í¬</strong></li>\n</ol>\n<p>ìœ„ ê³¼ì •ì„ ê±°ì¹˜ë©´ ìš°ë¶„íˆ¬ê°€ Nginxë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ì´ë•Œ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ ì¤‘ì¸ì§€ ì²´í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">systemctl status nginx</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">â— nginx.service - A high performance web server and a reverse proxy server\n     Loaded: loaded <span class=\"token punctuation\">(</span>/lib/systemd/system/nginx.service<span class=\"token punctuation\">;</span> enabled<span class=\"token punctuation\">;</span> vendor preset: enabled<span class=\"token punctuation\">)</span>\n     Active: active <span class=\"token punctuation\">(</span>running<span class=\"token punctuation\">)</span> since Wed <span class=\"token number\">2022</span>-04-20 09:03:47 UTC<span class=\"token punctuation\">;</span> 24h ago\n       Docs: man:nginx<span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span>\n   Main PID: <span class=\"token number\">20596</span> <span class=\"token punctuation\">(</span>nginx<span class=\"token punctuation\">)</span>\n      Tasks: <span class=\"token number\">2</span> <span class=\"token punctuation\">(</span>limit: <span class=\"token number\">1147</span><span class=\"token punctuation\">)</span>\n     Memory: <span class=\"token number\">5</span>.4M\n     CGroup: /system.slice/nginx.service\n             â”œâ”€20596 nginx: master process /usr/sbin/nginx -g daemon on<span class=\"token punctuation\">;</span> master_process on<span class=\"token punctuation\">;</span>\n             â””â”€20597 nginx: worker process</code></pre></div>\n<p>ë˜í•œ, ë¸Œë¼ìš°ì € ì£¼ì†Œì°½ì— ì„œë²„ì˜ ip í˜¹ì€ ë„ë©”ì¸ ì´ë¦„ì„ ì…ë ¥í•˜ì—¬ ì•„ë˜ì™€ ê°™ì€ ê¸°ë³¸ Nginx ëœë”© í˜ì´ì§€ê°€ í‘œì‹œë˜ëŠ”ì§€ ì‚´í´ë´…ë‹ˆë‹¤:</p>\n<figure>\n    <img src=\"https://cdn.jsdelivr.net/gh/jaehyeon48/jaehyeon48.github.io@master/assets/images/nginx/configure-nginx-on-ubuntu-2004/welcome_to_nginx.png\" alt=\"Nginx ëœë”© í˜ì´ì§€\">\n  <figcaption>Nginx ëœë”© í˜ì´ì§€.</figcaption>\n</figure>\n<p>ìœ„ ëœë”© í˜ì´ì§€ê°€ í‘œì‹œëœë‹¤ë©´ Nginxê°€ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ê³  ìˆë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤.</p>\n<ol start=\"4\">\n<li><strong>Nginx í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ ëª…ë ¹ì–´</strong></li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ì‹œì‘</span>\n<span class=\"token function\">sudo</span> systemctl start nginx\n\n<span class=\"token comment\"># ì¢…ë£Œ</span>\n<span class=\"token function\">sudo</span> systemctl stop nginx\n\n<span class=\"token comment\"># ì¬ì‹œì‘</span>\n<span class=\"token function\">sudo</span> systemctl restart nginx\n\n<span class=\"token comment\"># ë¦¬ë¡œë“œ (ë³€ê²½ëœ ì„¤ì •ì„ ì ìš©í•˜ëŠ” ê²½ìš° ì‚¬ìš©. ê¸°ì¡´ ì—°ê²°ì„ ëŠì§€ ì•ŠìŒ.)</span>\n<span class=\"token function\">sudo</span> systemctl reload nginx\n\n<span class=\"token comment\"># ê¸°ë³¸ì ìœ¼ë¡œ ì„œë²„ ì‹œì‘ ì‹œ nginxê°€ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ”ë°, ì´ë¥¼ ë§‰ê³  ì‹¶ì€ ê²½ìš°</span>\n<span class=\"token function\">sudo</span> systemctl disable nginx\n\n<span class=\"token comment\"># ì„œë²„ ì‹œì‘ ì‹œ ìë™ìœ¼ë¡œ nginxë¥¼ ì‹¤í–‰í•˜ê³  ì‹¶ì€ ê²½ìš°</span>\n<span class=\"token function\">sudo</span> systemctl <span class=\"token builtin class-name\">enable</span> nginx</code></pre></div>\n<ol start=\"5\">\n<li><strong>ì„œë²„ ë¸”ë¡ ì„¤ì •</strong></li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 1. ë””ë ‰í† ë¦¬ ìƒì„±:</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">mkdir</span> -p /var/www/ë„ë©”ì¸ ì´ë¦„/html\n\n<span class=\"token comment\"># 2. ì†Œìœ ì ì„¤ì •:</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">chown</span> -R <span class=\"token environment constant\">$USER</span><span class=\"token builtin class-name\">:</span><span class=\"token environment constant\">$USER</span> /var/www/ë„ë©”ì¸ ì´ë¦„/html\n\n<span class=\"token comment\"># 3. ê¶Œí•œ ì„¤ì •:</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">chmod</span> -R <span class=\"token number\">755</span> /var/www/ë„ë©”ì¸ ì´ë¦„\n\n<span class=\"token comment\"># 4. index.html ìƒì„±:</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">vi</span> /var/www/ë„ë©”ì¸ ì´ë¦„/html/index.html\n\n<span class=\"token comment\"># 5. ì„œë²„ ë¸”ë¡ ìƒì„±:</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">vi</span> /etc/nginx/sites-available/ë„ë©”ì¸ ì´ë¦„\n\n<span class=\"token comment\"># ì•„ë˜ ë‚´ìš© ì…ë ¥:</span>\nserver <span class=\"token punctuation\">{</span>\n    listen <span class=\"token number\">80</span><span class=\"token punctuation\">;</span>\n    listen <span class=\"token punctuation\">[</span>::<span class=\"token punctuation\">]</span>:80<span class=\"token punctuation\">;</span>\n\n    root /var/www/ë„ë©”ì¸ ì´ë¦„/html<span class=\"token punctuation\">;</span>\n    index index.html index.htm index.nginx-debian.html<span class=\"token punctuation\">;</span>\n\n    server_name ë„ë©”ì¸ ì´ë¦„ www.ë„ë©”ì¸ ì´ë¦„<span class=\"token punctuation\">;</span>\n\n    location / <span class=\"token punctuation\">{</span>\n        try_files <span class=\"token variable\">$uri</span> <span class=\"token variable\">$uri</span>/ <span class=\"token operator\">=</span><span class=\"token number\">404</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\"># 6. ì‹¬ë³¼ë¦­ ë§í¬ ìƒì„±:</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">ln</span> -s /etc/nginx/sites-available/ë„ë©”ì¸ ì´ë¦„ /etc/nginx/sites-enabled/\n\n<span class=\"token comment\"># 7. nginx.conf íŒŒì¼ ì„¤ì •:</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">vi</span> /etc/nginx/nginx.conf\n\n<span class=\"token comment\"># ì•„ë˜ ë‚´ìš©ìœ¼ë¡œ ìˆ˜ì •:</span>\n<span class=\"token punctuation\">..</span>.\nhttp <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">..</span>.\n    server_names_hash_bucket_size <span class=\"token number\">64</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">..</span>.\n\n<span class=\"token comment\"># 8. ì„¤ì • íŒŒì¼ì— ë¬¸ë²• ì˜¤ë¥˜ê°€ ì—†ëŠ”ì§€ ê²€ì‚¬:</span>\n<span class=\"token function\">sudo</span> nginx -t\n\n<span class=\"token comment\"># 9. Nginx ì¬ì‹œì‘:</span>\n<span class=\"token function\">sudo</span> systemctl restart nginx</code></pre></div>\n<p>ì´ì œ ë¸Œë¼ìš°ì € ì£¼ì†Œ ì°½ì— <code class=\"language-text\">http://ë„ë©”ì¸ ì´ë¦„</code>ì„ ì…ë ¥í•˜ë©´ ì•„ê¹Œ ìƒì„±í•œ <code class=\"language-text\">index.html</code> ì˜ ë‚´ìš©ì´ í‘œì‹œë©ë‹ˆë‹¤.</p>\n<h2 id=\"https-ì ìš©\" style=\"position:relative;\"><a href=\"#https-%EC%A0%81%EC%9A%A9\" aria-label=\"https ì ìš© permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"18\" height=\"18\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"link\" viewBox=\"0 0 512 512\"><path fill=\"#05b166\" d=\"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z\"></path></svg></a>HTTPS ì ìš©</h2>\n<p>ğŸ“Œ HTTPSë¥¼ ì ìš©í•˜ê³ ì í•˜ëŠ” ê²½ìš°, ë°˜ë“œì‹œ ë“±ë¡ëœ ë„ë©”ì¸ì´ ìˆì–´ì•¼ í•˜ê³ , ë„ë©”ì¸ì— ëŒ€í•œ A ë ˆì½”ë“œê°€ ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤. ë˜í•œ, ìœ„ì—ì„œ ì„¤ì •í–ˆë˜ ë‚´ìš©ë“¤ì´ ì ìš©ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.</p>\n<ol>\n<li><strong>Certbot ì„¤ì¹˜</strong></li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> certbot python3-certbot-nginx</code></pre></div>\n<ol start=\"2\">\n<li><strong>ë°©í™”ë²½ì—ì„œ HTTPS í—ˆìš©</strong></li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> ufw allow <span class=\"token string\">'Nginx Full'</span> <span class=\"token comment\"># HTTPì™€ HTTPS ëª¨ë‘ í—ˆìš©</span>\n<span class=\"token function\">sudo</span> ufw delete allow <span class=\"token string\">'Nginx HTTP'</span> <span class=\"token comment\"># ê¸°ì¡´ì˜ HTTP í—ˆìš© ì„¤ì • ì œê±°</span></code></pre></div>\n<ol start=\"3\">\n<li><strong>SSL ì¸ì¦ì„œ ë°œê¸‰</strong></li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> certbot --nginx -d ë„ë©”ì¸ ì´ë¦„ -d www.ë„ë©”ì¸ ì´ë¦„</code></pre></div>\n<p>ì´ë•Œ, ë§Œì•½ ì²˜ìŒìœ¼ë¡œ <code class=\"language-text\">certbot</code>ì„ ì‹¤í–‰í•˜ëŠ” ê²½ìš°ë¼ë©´ ì´ë©”ì¼ì„ ì…ë ¥í•˜ë¼ëŠ” ë¬¸êµ¬ì™€ ì•½ê´€ ë™ì˜ ì•ˆë‚´ì°½ì´ ëœ°ê²ƒì…ë‹ˆë‹¤. ì´ ê³¼ì •ì„ ì§„í–‰í•˜ë©´ <code class=\"language-text\">certbot</code>ì€ Letâ€™s Encrypt ì„œë²„ì™€ í†µì‹ í•˜ì—¬ ì—¬ëŸ¬ë¶„ì´ ì…ë ¥í•œ ë„ë©”ì¸ì´ ìœ íš¨í•œì§€ ì²´í¬í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹©ë‹ˆë‹¤.</p>\n<p>ì²´í¬ì— ì„±ê³µí•˜ë©´ <code class=\"language-text\">certbot</code>ì€ ì•„ë˜ì™€ ê°™ì´ HTTPS ì„¤ì •ì„ ì–´ë–»ê²Œ í•  ê²ƒì¸ê°€ë¥¼ ë¬¼ì–´ë³´ê²Œ ë©ë‹ˆë‹¤:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Please choose whether or not to redirect HTTP traffic to HTTPS, removing HTTP access.\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n1: No redirect - Make no further changes to the webserver configuration.\n2: Redirect - Make all requests redirect to secure HTTPS access. Choose this for\nnew sites, or if you're confident your site works on HTTPS. You can undo this\nchange by editing your web server's configuration.\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\nSelect the appropriate number [1-2] then [enter] (press 'c' to cancel):</code></pre></div>\n<p>ìœ„ ë‘ ê°€ì§€ ì˜µì…˜ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì‹œê³  ì—”í„°ë¥¼ ëˆ„ë¥´ë©´ ì•„ë˜ì™€ ê°™ì€ ë©”ì‹œì§€ê°€ ëœ¨ë©´ì„œ ì„¤ì •ì´ ì—…ë°ì´íŠ¸ë˜ê³  Nginxê°€ ì¬ì‹œì‘ë©ë‹ˆë‹¤:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">IMPORTANT NOTES:\n - Congratulations<span class=\"token operator\">!</span> Your certificate and chain have been saved at:\n   /etc/letsencrypt/live/example.com/fullchain.pem\n   Your key <span class=\"token function\">file</span> has been saved at:\n   /etc/letsencrypt/live/example.com/privkey.pem\n   Your cert will expire on <span class=\"token number\">2020</span>-08-18. To obtain a new or tweaked\n   version of this certificate <span class=\"token keyword\">in</span> the future, simply run certbot again\n   with the <span class=\"token string\">\"certonly\"</span> option. To non-interactively renew *all* of\n   your certificates, run <span class=\"token string\">\"certbot renew\"</span>\n - If you like Certbot, please consider supporting our work by:\n\n   Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate\n   Donating to EFF:                    https://eff.org/donate-le</code></pre></div>\n<p>ì´ì œ <code class=\"language-text\">/etc/nginx/sites-available/ë„ë©”ì¸ ì´ë¦„</code> íŒŒì¼ì— ì ‘ì†í•´ ë³´ë©´ ìë™ìœ¼ë¡œ ì ìš©ëœ ì„¤ì •ì„ ë³´ì‹¤ ìˆ˜ ìˆìœ¼ì‹¤ ê²ë‹ˆë‹¤.</p>\n<ol start=\"4\">\n<li><strong>Certbot ìë™ ê°±ì‹  í™•ì¸í•˜ê¸°</strong></li>\n</ol>\n<p>Letâ€™s Encryptì˜ ì¸ì¦ì„œëŠ” 90ì¼ ë™ì•ˆ ìœ íš¨í•©ë‹ˆë‹¤. ë‹¤í–‰íˆë„ <code class=\"language-text\">certbot</code> íŒ¨í‚¤ì§€ëŠ” íƒ€ì´ë¨¸ë¥¼ ì„¤ì •í•˜ì—¬ í•˜ë£¨ì— ë‘ ë²ˆ ì²´í¬í•œ ë’¤ ì¸ì¦ì„œ ë§Œë£Œ ê¸°ê°„ì´ 30ì¼ ì´ë‚´ë¼ë©´ ìë™ìœ¼ë¡œ ê°±ì‹ í•©ë‹ˆë‹¤.</p>\n<p>ì´ íƒ€ì´ë¨¸ì˜ ìƒíƒœëŠ” ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ ì²´í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl status certbot.timer</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">â— certbot.timer - Run certbot twice daily\n     Loaded: loaded <span class=\"token punctuation\">(</span>/lib/systemd/system/certbot.timer<span class=\"token punctuation\">;</span> enabled<span class=\"token punctuation\">;</span> vendor preset: enabled<span class=\"token punctuation\">)</span>\n     Active: active <span class=\"token punctuation\">(</span>waiting<span class=\"token punctuation\">)</span> since Mon <span class=\"token number\">2020</span>-05-04 <span class=\"token number\">20</span>:04:36 UTC<span class=\"token punctuation\">;</span> <span class=\"token number\">2</span> weeks <span class=\"token number\">1</span> days ago\n    Trigger: Thu <span class=\"token number\">2020</span>-05-21 05:22:32 UTC<span class=\"token punctuation\">;</span> 9h left\n   Triggers: â— certbot.service</code></pre></div>\n<p>ìë™ ê°±ì‹  ê³¼ì •ì„ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> certbot renew --dry-run</code></pre></div>\n<h2 id=\"http2-ì ìš©\" style=\"position:relative;\"><a href=\"#http2-%EC%A0%81%EC%9A%A9\" aria-label=\"http2 ì ìš© permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"18\" height=\"18\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"link\" viewBox=\"0 0 512 512\"><path fill=\"#05b166\" d=\"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z\"></path></svg></a>HTTP/2 ì ìš©</h2>\n<p>ğŸ“Œ HTTP/2ë¥¼ ì ìš©í•˜ê³ ì í•˜ëŠ” ê²½ìš°, ë°˜ë“œì‹œ ë“±ë¡ëœ ë„ë©”ì¸ê³¼ ì„œë²„ì— TLS ì„¤ì •ì´ ì ìš©ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.</p>\n<ol>\n<li><strong>HTTP/2 ì˜µì…˜ ì¼œê¸°</strong></li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ì„¤ì • íŒŒì¼ ì—´ê¸°</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">vi</span> /etc/nginx/sites-enabled/ë„ë©”ì¸ ì´ë¦„\n\n<span class=\"token comment\"># ì•„ë˜ ë‚´ìš© ì…ë ¥ ('http2' ë‹¨ì–´ ì¶”ê°€)</span>\n\n<span class=\"token punctuation\">..</span>.\n    listen <span class=\"token punctuation\">[</span>::<span class=\"token punctuation\">]</span>:443 ssl http2 <span class=\"token assign-left variable\">ipv6only</span><span class=\"token operator\">=</span>on<span class=\"token punctuation\">;</span> \n    listen <span class=\"token number\">443</span> ssl http2<span class=\"token punctuation\">;</span> \n<span class=\"token punctuation\">..</span>.\n\n<span class=\"token comment\"># ì„¤ì • íŒŒì¼ ë¬¸ë²• ì²´í¬</span>\n<span class=\"token function\">sudo</span> nginx -t</code></pre></div>\n<ol start=\"2\">\n<li><strong>ì•ˆì „í•˜ì§€ ì•Šì€ Cipher Suite ì œê±°</strong></li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ì„¤ì • íŒŒì¼ ì—´ê¸°</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">vi</span> /etc/nginx/sites-enabled/ë„ë©”ì¸ ì´ë¦„\n\n<span class=\"token comment\"># ì•„ë˜ ë‚´ìš© ì£¼ì„ ì²˜ë¦¬ (í˜¹ì€ ì œê±°)</span>\ninclude /etc/letsencrypt/options-ssl-nginx.conf<span class=\"token punctuation\">;</span> <span class=\"token comment\"># managed by Certbot&lt;^></span>\n\n<span class=\"token comment\"># ì´í›„ ìœ„ ë¼ì¸ ë°”ë¡œ ë°‘ì— ì•„ë˜ ë‚´ìš© ì¶”ê°€</span>\nssl_ciphers EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:<span class=\"token operator\">!</span>MD5<span class=\"token punctuation\">;</span></code></pre></div>\n<p>ë§Œì•½ self-signed ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, ì•„ë˜ì˜ ê³¼ì •ë˜í•œ ìˆ˜í–‰í•©ë‹ˆë‹¤:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ì„¤ì • íŒŒì¼ ì—´ê¸°</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/nginx/snippets/ssl-params.conf\n\n<span class=\"token comment\"># ì•„ë˜ ë‚´ìš© ì°¾ê¸°</span>\nssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># ìœ„ ë‚´ìš©ì„ ì•„ë˜ ë‚´ìš©ìœ¼ë¡œ ë°”ê¾¸ê¸°</span>\nssl_ciphers EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:<span class=\"token operator\">!</span>MD5<span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì„¤ì • ê³¼ì •ì´ ëë‚˜ë©´ Nginx ì„¤ì •ì„ ì ìš©í•©ë‹ˆë‹¤:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl reload nginx</code></pre></div>\n<ol start=\"3\">\n<li><strong>HSTS(HTTP Strict Transport Security) ì„¤ì •í•˜ê¸°</strong> </li>\n</ol>\n<p>ê¸°ì¡´ì—ë„ HTTP ì—°ê²°ì„ HTTPSë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ í•œë‹¤ê³  í•˜ë”ë¼ë„, <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security\" target=\"_blank\" rel=\"noreferrer noopener\">HSTS</a> ì„¤ì •ì„ í†µí•´ ë°˜ë“œì‹œ HTTPSë¡œë§Œ í†µì‹ í•˜ë„ë¡ ê°•ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ì„¤ì • íŒŒì¼ ì—´ê¸°</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">vi</span> /etc/nginx/sites-enabled/ë„ë©”ì¸ ì´ë¦„\n\n<span class=\"token comment\"># 'ssl_ciphers' ì„¤ì •ì„ í¬í•¨í•˜ëŠ” ì„œë²„ ë¸”ë¡ì— ì•„ë˜ ë¼ì¸ ì¶”ê°€</span>\nadd_header Strict-Transport-Security <span class=\"token string\">\"max-age=31536000\"</span> always<span class=\"token punctuation\">;</span></code></pre></div>\n<p>ê¸°ë³¸ì ìœ¼ë¡œ ìœ„ í—¤ë”ëŠ” ì„œë¸Œë„ë©”ì¸ì— ëŒ€í•´ì„  ì ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë§Œì•½ ì„œë¸Œë„ë©”ì¸ì—ë„ HSTSë¥¼ ì ìš©í•˜ê³  ì‹¶ë‹¤ë©´ <code class=\"language-text\">includeSubDomains</code> ê°’ì„ ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">add_header Strict-Transport-Security <span class=\"token string\">\"max-age=31536000; includeSubDomains\"</span> always<span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"ë ˆí¼ëŸ°ìŠ¤\" style=\"position:relative;\"><a href=\"#%EB%A0%88%ED%8D%BC%EB%9F%B0%EC%8A%A4\" aria-label=\"ë ˆí¼ëŸ°ìŠ¤ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"18\" height=\"18\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"link\" viewBox=\"0 0 512 512\"><path fill=\"#05b166\" d=\"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z\"></path></svg></a>ë ˆí¼ëŸ°ìŠ¤</h2>\n<ul>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-ubuntu-20-04\" target=\"_blank\" rel=\"noreferrer noopener\">How To Install Nginx on Ubuntu 20.04</a></li>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-20-04\" target=\"_blank\" rel=\"noreferrer noopener\">How To Secure Nginx with Letâ€™s Encrypt on Ubuntu 20.04</a></li>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/how-to-set-up-nginx-with-http-2-support-on-ubuntu-20-04\" target=\"_blank\" rel=\"noreferrer noopener\">How To Set Up Nginx with HTTP/2 Support on Ubuntu 20.04</a></li>\n</ul>","frontmatter":{"title":"Ubuntu 20.04ì—ì„œ Nginx ì„¤ì¹˜ ë° ì„¤ì •í•˜ê¸°","date":"April 21, 2022","category":"nginx"}}},"pageContext":{"slug":"/nginx/configure-nginx-on-ubuntu-2004/","previous":{"fields":{"slug":"/javascript/prevent-stack-overflow-in-js/"},"frontmatter":{"title":"ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì¬ê·€í˜¸ì¶œë¡œ ì¸í•œ ìŠ¤íƒ ì˜¤ë²„í”Œë¡œìš°ë¥¼ ë§‰ëŠ” ë°©ë²•"}},"next":{"fields":{"slug":"/nginx/nginx-architecture/"},"frontmatter":{"title":"NGINXì˜ ì•„í‚¤í…ì²˜"}}}},"staticQueryHashes":[]}